<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - FarmaVida CMS</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/authGuard.js"></script>
    <link rel="stylesheet" href="css/dashboard.css">
</head>

<body>

    <div class="admin-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="#" class="logo"></span></a>
            </div>
            <ul class="sidebar-menu">
                <li class="menu-header">Principal</li>
                <li><a href="#" class="nav-link active" data-target="view-dashboard"><i
                            class='bx bxs-dashboard'></i><span>Dashboard</span></a></li>
                <li><a href="#" class="nav-link" data-target="view-products"><i
                            class='bx bx-shopping-bag'></i><span>Productos</span></a></li>
                <li><a href="#" class="nav-link" data-target="view-orders"><i
                            class='bx bx-cart-alt'></i><span>Pedidos</span></a></li>
                <li><a href="#" class="nav-link" data-target="view-users"><i
                            class='bx bx-user-circle'></i><span>Usuarios</span></a></li>

                <li class="menu-header">CMS / Tienda</li>
                <li><a href="#" class="nav-link" data-target="view-cms-hero"><i class='bx bx-image'></i><span>Hero
                            Banner</span></a></li>
                <li><a href="#" class="nav-link" data-target="view-cms-carousel"><i
                            class='bx bx-slideshow'></i><span>Carrusel</span></a></li>
                <li><a href="#" class="nav-link" data-target="view-cms-categories"><i
                            class='bx bx-category'></i><span>Categorías</span></a></li>
                <li><a href="#" class="nav-link" data-target="view-cms-colors"><i
                            class='bx bx-palette'></i><span>Colores</span></a></li>

                <li class="menu-header">Configuración</li>
                <li><a href="" id="btn-admin-logout" class="logout-dashboard"><i class='bx bx-log-out'></i><span>Cerrar
                            Sesión</span></a></li>
            </ul>
        </aside>

        <main class="main-content">
            <header class="top-bar" style="display: flex; justify-content: space-between; align-items: center;">
                <h2 id="page-title">Resumen General</h2>

                <div id="currency-widget"
                    style="display: none; align-items: center; gap: 10px; background: white; padding: 5px 15px; border-radius: 30px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border: 1px solid #eee;">
                    <label style="font-weight: 600; color: var(--primary-color); font-size: 0.9rem;">Tasa BCV:</label>

                    <div style="position: relative; display: flex; align-items: center;">
                        <span style="position: absolute; left: 10px; color: #666; font-size: 0.85rem;">Bs.</span>
                        <input type="number" id="cms-currency-rate" step="0.01" placeholder="0.00"
                            style="padding: 5px 5px 5px 35px; width: 100px; border: 1px solid #ddd; border-radius: 5px; outline: none; font-weight: bold;">
                    </div>

                    <button id="btn-save-currency" class="btn-complete"
                        style="padding: 5px 15px; font-size: 0.8rem; height: auto; width: auto; min-width: auto;">
                        <i class='bx bx-save'></i>
                    </button>
                </div>
            </header>

            <div id="view-dashboard" class="content-section active">
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-info">
                            <h3>Total Productos</h3>
                            <h1 id="total-products">0</h1>
                            <p>En catálogo activo</p>
                        </div>
                        <div class="kpi-icon primary"><i class='bx bx-capsule'></i></div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-info">
                            <h3>Bajo Stock / Sin Stock</h3>
                            <h1 id="low-stock">0</h1>
                            <p>Menos de 15 unidades</p>
                        </div>
                        <div class="kpi-icon warning"><i class='bx bx-error-circle'></i></div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-info">
                            <h3>Valor Inventario</h3>
                            <h1 id="total-investment">$0.00</h1>
                            <p>Costo total acumulado</p>
                        </div>
                        <div class="kpi-icon success"><i class='bx bx-dollar-circle'></i></div>
                    </div>
                </div>
                <div class="chart-section">
                    <div class="chart-header">
                        <h3>Reporte de Ventas Mensuales</h3>
                    </div>
                    <div class="chart-container"><canvas id="salesChart"></canvas></div>
                </div>
            </div>

            <div id="view-products" class="content-section" style="display: none;">
                <div class="products-toolbar">
                    <div class="search-box"><i class='bx bx-search'></i><input type="text" id="prod-search"
                            placeholder="Buscar producto..."></div>
                    <div class="filters-group">
                        <select id="prod-cat-filter">
                            <option value="all">Todas las Categorías</option>
                        </select>
                        <select id="prod-stock-filter">
                            <option value="all">Todo el Stock</option>
                            <option value="available">Disponible</option>
                            <option value="low">Bajo Stock</option>
                            <option value="out">Agotado</option>
                        </select>
                        <button class="btn-add-product" id="btn-open-add-modal"><i class='bx bx-plus'></i> Nuevo
                            Producto</button>
                    </div>
                </div>
                <div class="products-grid-container" id="products-list-container"></div>
                <div id="no-products-msg"
                    style="display:none; text-align:center; padding: 40px; color: #666; width: 100%;">No se encontraron
                    productos con esos filtros.</div>
            </div>

            <div id="view-orders" class="content-section" style="display: none;">
                <div class="orders-toolbar">
                    <div class="search-box"><i class='bx bx-search'></i><input type="text" id="order-search"
                            placeholder="Buscar por cliente o guía de compra"></div>

                    <div class="filters-group">
                        <select id="order-status-filter" class="search-bar" style="margin-left: 10px;">
                            <option value="all">Todos los Pedidos</option>
                            <option value="pending">Por Entregar</option>
                            <option value="delivered">Entregados</option>
                        </select>
                    </div>


                    <div class="date-filter-box"><label>Filtrar fecha:</label><input type="date"
                            id="order-date-filter"><button id="clear-date-btn" title="Limpiar fecha"><i
                                class='bx bx-x'></i></button></div>
                </div>
                <div class="table-container">
                    <table class="custom-table">
                        <thead>
                            <tr>
                                <th>No. Orden</th>
                                <th>Cliente</th>
                                <th>Fecha</th>
                                <th>Guía Compra</th>
                                <th>Total</th>
                                <th>Acción</th>
                            </tr>
                        </thead>
                        <tbody id="orders-table-body"></tbody>
                    </table>
                    <div id="no-results" style="display:none; text-align:center; padding: 20px; color: #666;">No se
                        encontraron pedidos con esos filtros.</div>
                </div>
            </div>

            <div id="view-users" class="content-section" style="display: none;">
                <div class="users-toolbar">
                    <div class="search-box">
                        <i class='bx bx-search'></i>
                        <input type="text" id="user-search" placeholder="Buscar por nombre o correo...">
                    </div>
                    <div class="filters-group">
                        <select id="user-role-filter">
                            <option value="all">Todos los Roles</option>
                            <option value="Cliente">Clientes</option>
                            <option value="Admin">Administradores</option>
                        </select>
                        <button class="btn-add-product" id="btn-open-create-user">
                            <i class='bx bx-plus'></i> Nuevo Usuario
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <table class="custom-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Usuario</th>
                                <th>Rol</th>
                                <th>Acción</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body"></tbody>
                    </table>
                    <div id="no-users-msg" style="display:none; text-align:center; padding: 20px; color: #666;">
                        No se encontraron usuarios con esos datos.
                    </div>
                </div>
            </div>

            <div id="view-cms-hero" class="content-section" style="display: none;">
                <div class="cms-container">
                    <div class="cms-card">
                        <h3>Identidad y Hero Banner</h3>
                        <p style="color: #666; font-size: 0.9rem; margin-bottom: 20px;">Personaliza los textos
                            principales y las imágenes.</p>

                        <div style="margin-bottom: 20px;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <label class="form-label">Logo de la Farmacia</label>

                                <button id="btn-delete-logo"
                                    style="display: none; background: transparent; border: none; color: #d32f2f; cursor: pointer; font-size: 0.85rem;">
                                    <i class='bx bx-trash'></i> Quitar Logo
                                </button>
                            </div>

                            <div>
                                <div>
                                    <div class="upload-container-centered">
                                        <input type="file" id="logo-file" accept="image/*" hidden>
                                        <div class="custom-upload-box" id="logo-upload-trigger"
                                            style="height: 150px; width: 300px; padding: 10px;">
                                            <img id="logo-preview" class="upload-preview-img" src="" alt="Logo"
                                                style="object-fit: contain;">

                                            <div class="upload-placeholder" id="logo-placeholder"
                                                style="flex-direction: column; gap: 5px;">
                                                <i class='bx bx-image-add upload-icon-large'></i>
                                                <span
                                                    style="font-size: 0.7rem; color: #999; text-align: center;">Logo</span>
                                            </div>

                                            <div class="upload-overlay" style="font-size: 0.8rem;"><i
                                                    class='bx bx-edit-alt'></i></div>
                                        </div>
                                    </div>
                                </div>

                                <div style="flex-grow: 1;">
                                    <label class="form-label" style="margin-top: 25px;">Nombre de la Farmacia</label>
                                    <input type="text" id="cms-store-name" class="form-input"
                                        placeholder="Ej: FarmaVida" style="height: 50px;">
                                </div>
                            </div>
                        </div>

                        <div class="form-row" style="display: flex; gap: 15px; margin-bottom: 25px;">
                            <div style="flex: 1;">
                                <label class="form-label">Título Carrusel</label>
                                <input type="text" id="cms-carousel-title" class="form-input"
                                    placeholder="Ej: Lo Más Vendido">
                            </div>
                            <div style="flex: 1;">
                                <label class="form-label">Título Catálogo</label>
                                <input type="text" id="cms-catalog-title" class="form-input"
                                    placeholder="Ej: Explora Nuestro Catálogo">
                            </div>
                        </div>

                        <div style="display: flex; gap: 20px; margin-bottom: 30px; flex-wrap: wrap;">

                            <div style="flex: 1; min-width: 250px;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                    <label class="form-label">Imagen Principal (Derecha)</label>
                                    <button id="btn-delete-hero-img"
                                        style="display: none; background: transparent; border: none; color: #d32f2f; cursor: pointer; font-size: 0.85rem;">
                                        <i class='bx bx-trash'></i> Eliminar
                                    </button>
                                </div>
                                <div class="upload-container-centered">
                                    <input type="file" id="hero-img-file" accept="image/*" hidden>
                                    <div class="custom-upload-box hero-upload-box" id="hero-upload-trigger">
                                        <img id="hero-img-preview" class="upload-preview-img" src="" alt="Hero Der">
                                        <div class="upload-placeholder" id="hero-upload-placeholder">
                                            <i class='bx bx-image-add upload-icon-large'></i>
                                            <span>Imagen (PNG Transparente)</span>
                                        </div>
                                        <div class="upload-overlay"><i class='bx bx-edit-alt'></i> Cambiar</div>
                                    </div>
                                </div>
                            </div>

                            <div style="flex: 1; min-width: 250px;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                    <label class="form-label">Imagen de Fondo (Opcional)</label>
                                    <button id="btn-delete-hero-bg"
                                        style="display: none; background: transparent; border: none; color: #d32f2f; cursor: pointer; font-size: 0.85rem;">
                                        <i class='bx bx-trash'></i> Eliminar
                                    </button>
                                </div>
                                <div class="upload-container-centered">
                                    <input type="file" id="hero-bg-file" accept="image/*" hidden>
                                    <div class="custom-upload-box hero-upload-box" id="hero-bg-trigger">
                                        <img id="hero-bg-preview" class="upload-preview-img" src="" alt="Hero BG"
                                            style="object-fit: cover;">
                                        <div class="upload-placeholder" id="hero-bg-placeholder">
                                            <i class='bx bx-landscape upload-icon-large'></i>
                                            <span>Fondo (Cover)</span>
                                        </div>
                                        <div class="upload-overlay"><i class='bx bx-edit-alt'></i> Cambiar</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-row" style="margin-bottom: 15px;">
                            <label class="form-label">Título del Hero (H1)</label>
                            <input type="text" id="cms-hero-title" class="form-input"
                                placeholder="Ej: Tu Salud, Nuestra Prioridad">
                        </div>
                        <div class="form-row" style="margin-bottom: 25px;">
                            <label class="form-label">Subtítulo del Hero (P)</label>
                            <textarea id="cms-hero-text" class="form-input" rows="3"
                                placeholder="Ej: Descubre la nueva línea..."></textarea>
                        </div>

                        <button id="btn-save-hero" class="btn-complete"><i class='bx bx-save'></i> Guardar Todo</button>
                    </div>
                </div>
            </div>

            <div id="view-cms-carousel" class="content-section" style="display: none;">
                <div class="cms-container" style="max-width: 1000px;">
                    <div class="cms-card" style="width: 60rem;">
                        <h3>Productos "Lo Más Vendido"</h3>
                        <p style="color: #666; font-size: 0.9rem; margin-bottom: 20px;">Selecciona qué productos
                            aparecerán en el carrusel de la página principal.</p>

                        <div style="margin-bottom: 15px; display: flex; gap: 10px;">
                            <input type="text" id="cms-carousel-search" class="form-input"
                                placeholder="Buscar producto por nombre..." style="flex: 1;">

                            <select id="cms-carousel-cat-filter" class="form-input"
                                style="width: 200px; cursor: pointer;">
                                <option value="all">Todas las Categorías</option>
                            </select>
                        </div>
                        <div class="table-container" style="max-height: 400px; overflow-y: auto;">
                            <table class="custom-table">
                                <thead>
                                    <tr>
                                        <th>Producto</th>
                                        <th>Categoría</th>
                                        <th style="text-align: center; width: 100px;">
                                            <div
                                                style="display: flex; flex-direction: column; align-items: center; gap: 5px;">
                                                <span style="font-size: 0.8rem;">Todos</span>
                                                <input type="checkbox" id="cms-carousel-select-all"
                                                    style="width: 18px; height: 18px; cursor: pointer;">
                                            </div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="cms-carousel-table-body">
                                </tbody>
                            </table>
                        </div>
                        <div style="margin-top: 20px; text-align: right;">
                            <button id="btn-save-carousel" class="btn-complete"
                                style="width: auto; display: inline-flex;"><i class='bx bx-save'></i> Actualizar
                                Carrusel</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-cms-categories" class="content-section" style="display: none;">
                <div class="cms-container">
                    <div class="cms-card">
                        <h3>Gestión de Categorías</h3>
                        <p style="color: #666; font-size: 0.9rem; margin-bottom: 20px;">Añade o elimina categorías para
                            tus productos.</p>

                        <div class="add-cat-row">
                            <input type="text" id="new-cat-input" class="form-input"
                                placeholder="Nombre nueva categoría...">
                            <button id="btn-add-cat" class="btn-add-product"><i class='bx bx-plus'></i> Añadir</button>
                        </div>

                        <div class="categories-list" id="cms-categories-list">
                        </div>
                        <p style="font-size: 0.8rem; color: #999; margin-top: 10px;">* Las categorías en uso por
                            productos no deberían eliminarse.</p>
                    </div>
                </div>
            </div>

            <div id="view-cms-colors" class="content-section" style="display: none;">
                <div class="cms-container">
                    <div class="cms-card">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <div>
                                <h3>Personalización de Tema</h3>
                                <p style="color: #666; font-size: 0.9rem;">Define la paleta de colores global.</p>
                            </div>
                            <button id="btn-reset-colors" class="btn-complete" style="width: auto;">
                                <i class='bx bx-reset'></i> Restaurar
                            </button>
                        </div>

                        <div class="colors-grid" id="dynamic-colors-container">
                        </div>

                        <button id="btn-save-colors" class="btn-complete">
                            <i class='bx bx-brush'></i> Guardar Tema
                        </button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <div class="product-modal-overlay" id="tracking-modal-overlay">
        <div class="product-modal-box tracking-box">
            <span class="close-product-modal" id="close-tracking-modal"><i class='bx bx-x'></i></span>
            <div class="tracking-content">
                <div class="tracking-header">
                    <div class="icon-circle"><i class='bx bx-package'></i></div>
                    <h2>Detalles de Compra</h2>
                    <p>Guía de Compra: <span id="tm-tracking-id" class="highlight-tracking">---</span></p>
                </div>
                <div class="tracking-section">
                    <h3>Datos del Cliente</h3>
                    <div class="user-info-grid">
                        <div class="info-group"><label>Nombre</label>
                            <p id="tm-user-name">Usuario</p>
                        </div>
                        <div class="info-group"><label>Correo</label>
                            <p id="tm-user-email">correo@ejemplo.com</p>
                        </div>
                        <div class="info-group"><label>Teléfono</label>
                            <p id="tm-user-phone">000-0000</p>
                        </div>
                        <div class="info-group" id="tm-rate-box" style="display: none;">
                            <label style="color: var(--primary-color);">Tasa de Compra</label>
                            <p id="tm-rate-value" style="font-weight: 700;">Bs. 0.00</p>
                        </div>
                    </div>
                </div>
                <div class="tracking-section">
                    <h3>Productos</h3>
                    <div class="tracking-products-list" id="tm-products-list"></div>
                </div>
                <div class="tracking-footer">
                    <div class="tracking-total-row"><span>Total Pagado:</span><span id="tm-total-price">$0.00</span>
                    </div>
                    <button id="btn-complete-order" class="btn-complete">Completar Entrega <i
                            class='bx bx-check-double'></i></button>
                </div>
            </div>
        </div>
    </div>

    <div class="product-modal-overlay" id="add-product-modal">
        <div class="product-modal-box tracking-box" style="max-width: 500px;">
            <span class="close-product-modal" id="close-add-modal"><i class='bx bx-x'></i></span>
            <div class="tracking-content">
                <div class="tracking-header">
                    <h2 id="modal-product-title" style="margin-bottom: 0;">Nuevo Producto</h2>
                </div>
                <form id="product-form" class="tracking-section"
                    style="display: flex; flex-direction: column; gap: 20px;">
                    <input type="hidden" id="prod-id-input">
                    <div class="upload-container-centered">
                        <input type="file" id="prod-img-file" accept="image/*" hidden>
                        <div class="custom-upload-box" id="upload-trigger-zone">
                            <img id="prod-img-preview" class="upload-preview-img" src="" alt="Preview">
                            <div class="upload-placeholder" id="upload-placeholder-content"><i
                                    class='bx bx-image-add upload-icon-large'></i><span>Añadir Imagen</span></div>
                            <div class="upload-overlay"><i class='bx bx-edit-alt'></i> Cambiar</div>
                        </div>
                    </div>
                    <div class="form-row" style="display: flex; gap: 15px;">
                        <div style="flex: 1;"><label class="form-label">Nombre del Producto</label>
                            <input type="text" id="prod-name-input" class="form-input" placeholder="Nombre" required>
                        </div>
                    </div>
                    <div class="form-row" style="display: flex; gap: 15px;">
                        <div style="flex: 1;">
                            <label class="form-label">Categoría</label>
                            <select id="prod-cat-input" class="form-input">
                            </select>
                        </div>
                    </div>
                    <div class="form-row" style="display: flex; gap: 15px;">
                        <div style="flex: 1;"><label class="form-label">Precio ($)</label>
                            <input type="number" min="0" step="0.01" id="prod-price-input" class="form-input" placeholder="0.00"
                                required>
                        </div>
                        <div style="flex: 1;"><label class="form-label">Stock</label>
                            <input type="number" min="0" id="prod-stock-input" class="form-input" placeholder="0" required>
                        </div>
                    </div>
                    <div><label class="form-label">Descripción</label>
                        <textarea id="prod-desc-input" class="form-input" rows="4" style="resize: vertical;"
                            placeholder="Descripción del producto" required></textarea>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border: 1px dashed #ccc; margin-top: 10px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <input type="checkbox" id="prod-discount-active" style="width: 18px; height: 18px; cursor: pointer;">
                            <label for="prod-discount-active" style="font-weight: 600; font-size: 0.9rem; cursor: pointer; color: var(--primary-color);">Habilitar Descuento</label>
                        </div>
                        
                        <div id="discount-settings" style="display: none; gap: 15px;">
                            <div style="flex: 1;">
                                <label class="form-label">Porcentaje (%)</label>
                                <input type="number" id="prod-discount-percent" class="form-input" placeholder="%" min="1" max="99">
                            </div>
                            <div style="flex: 1.5;">
                                <label class="form-label">Duración de la Oferta</label>
                                <select id="prod-discount-duration" class="form-input">
                                    <option value="1">1 Hora</option>
                                    <option value="6">6 Horas</option>
                                    <option value="12">12 Horas</option>
                                    <option value="24" selected>1 Día</option>
                                    <option value="72">3 Días</option>
                                    <option value="120">5 Días</option>
                                    <option value="240">10 Días</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="tracking-footer" style="padding-top: 15px;"><button id="btn-save-product" class="btn-complete">Guardar Producto <i
                            class='bx bx-save'></i></button></div>
            </div>
        </div>
    </div>

    <div class="product-modal-overlay" id="delete-modal">
        <div class="product-modal-box tracking-box" style="max-width: 400px; text-align: center;">
            <div class="tracking-content">
                <div style="margin: 20px 0;">
                    <div class="icon-circle"
                        style="background: #FFEBEE; color: #C62828; margin: 0 auto 15px auto; width: 80px; height: 80px; font-size: 2.5rem;">
                        <i class='bx bx-trash'></i>
                    </div>
                    <h2 style="color: var(--text-dark); margin-bottom: 10px;">¿Eliminar Producto?</h2>
                    <p style="color: var(--text-gray); font-size: 0.95rem;">Esta acción no se puede deshacer.</p>
                </div>
                <div style="display: flex; gap: 15px; margin-top: 10px;">
                    <button id="btn-cancel-delete" class="btn-complete"
                        style="background: transparent; border: 1px solid var(--border-color); color: var(--text-gray);">Cancelar</button>
                    <button id="btn-confirm-delete" class="btn-complete" style="background: #C62828; color: white;">Sí,
                        Eliminar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="product-modal-overlay" id="complete-order-modal">
        <div class="product-modal-box tracking-box" style="max-width: 400px; text-align: center;">
            <div class="tracking-content">
                <div style="margin: 20px 0;">
                    <div class="icon-circle"
                        style="background: #E8F5E9; color: #2E7D32; margin: 0 auto 15px auto; width: 80px; height: 80px; font-size: 2.5rem;">
                        <i class='bx bx-check-circle'></i>
                    </div>
                    <h2 style="color: var(--text-dark); margin-bottom: 10px;">¿Completar Entrega?</h2>
                    <p style="color: var(--text-gray); font-size: 0.95rem;">El pedido será marcado como entregado.</p>
                </div>
                <div style="display: flex; gap: 15px; margin-top: 10px;">
                    <button id="btn-cancel-complete" class="btn-complete"
                        style="background: transparent; border: 1px solid var(--border-color); color: var(--text-gray);">Cancelar</button>
                    <button id="btn-confirm-complete" class="btn-complete">Sí, Completar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="product-modal-overlay" id="success-modal">
        <div class="product-modal-box tracking-box" style="max-width: 400px; text-align: center;">
            <div class="tracking-content">
                <div style="margin: 20px 0;">
                    <div class="icon-circle"
                        style="background: #2E7D32; color: white; margin: 0 auto 15px auto; width: 80px; height: 80px; font-size: 2.5rem; box-shadow: 0 4px 15px rgba(46, 125, 50, 0.3);">
                        <i class='bx bx-check'></i>
                    </div>
                    <h2 style="color: var(--text-dark); margin-bottom: 10px;">¡Operación Exitosa!</h2>
                    <p id="success-message" style="color: var(--text-gray); font-size: 0.95rem;">La acción se ha
                        completado correctamente.</p>
                </div>
                <button id="btn-close-success" class="btn-complete">Aceptar</button>
            </div>
        </div>
    </div>

    <div id="custom-alert" class="custom-alert-overlay">
        <div class="custom-alert-box">
            <div class="alert-icon">
                <i class='bx bx-error-circle'></i>
            </div>
            <h3>¡Atención!</h3>
            <p id="custom-alert-message">Mensaje de alerta.</p>
            <button id="btn-close-alert">Entendido</button>
        </div>
    </div>

    <div class="product-modal-overlay" id="user-modal">
        <div class="product-modal-box tracking-box" style="max-width: 500px;">
            <span class="close-product-modal" id="close-user-modal"><i class='bx bx-x'></i></span>
            <div class="tracking-content">
                <div class="tracking-header">
                    <h2 id="user-modal-title" style="margin-bottom: 0;">Editar Usuario</h2>
                    <p id="user-modal-id-display" style="color: var(--text-gray); font-size: 0.8rem; margin-top: 5px;">
                        ID: #000</p>
                </div>
                <form id="user-form" class="tracking-section" style="display: flex; flex-direction: column; gap: 20px;">
                    <input type="hidden" id="user-id-input">
                    <div class="upload-container-centered">
                        <input type="file" id="user-img-file" accept="image/*" hidden>
                        <div class="custom-upload-box" id="user-upload-trigger" style="border-radius: 50%;">
                            <img id="user-img-preview" class="upload-preview-img" src="" alt="User"
                                style="border-radius: 50%;">
                            <div class="upload-placeholder" id="user-upload-placeholder"><i
                                    class='bx bx-user upload-icon-large'></i><span>Foto</span></div>
                            <div class="upload-overlay" style="border-radius: 50%;"><i class='bx bx-camera'></i></div>
                        </div>
                    </div>
                    <div class="form-row" style="display: flex; gap: 15px;">
                        <div style="flex: 1;"><label class="form-label">Nombre Completo</label><input type="text"
                                id="user-name-input" class="form-input" placeholder="Nombre y Apellido" required></div>
                    </div>
                    <div class="form-row" style="display: flex; gap: 15px;">
                        <div style="flex: 1;"><label class="form-label">Correo Electrónico</label><input type="email"
                                id="user-email-input" class="form-input" placeholder="Email" required></div>
                    </div>
                    <div class="form-row">
                        <div class="form-row">
                            <label class="form-label">Rol de Usuario</label>
                            <select id="user-role-input" class="form-input">
                                <option value="Cliente">Cliente</option>
                                <option value="Admin">Administrador</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row" style="display: flex; gap: 15px;">
                        <div style="flex: 1;">
                            <label class="form-label">Contraseña</label>
                            <input type="password" id="user-pass-input" class="form-input" placeholder="••••••••">
                            <small style="color: #999; font-size: 0.75rem;">Dejar en blanco para mantener la contraseña
                                actual</small>
                        </div>
                        <div style="flex: 1;">
                            <label class="form-label">Confirmar Contraseña</label>
                            <input type="password" id="user-pass-confirm-input" class="form-input"
                                placeholder="••••••••">
                        </div>
                    </div>
                </form>
                <div class="tracking-footer" style="display: flex; gap: 10px; flex-direction: column;">
                    <button id="btn-save-user" class="btn-complete">Guardar Cambios <i class='bx bx-save'></i></button>
                    <button id="btn-delete-user-trigger" class="btn-complete btn-danger">Eliminar Usuario <i
                            class='bx bx-trash'></i></button>
                </div>
            </div>
        </div>
    </div>

    <div class="product-modal-overlay" id="delete-user-modal">
        <div class="product-modal-box tracking-box" style="max-width: 400px; text-align: center;">
            <div class="tracking-content">
                <div style="margin: 20px 0;">
                    <div class="icon-circle"
                        style="background: #FFEBEE; color: #C62828; margin: 0 auto 15px auto; width: 80px; height: 80px; font-size: 2.5rem;">
                        <i class='bx bx-user-x'></i>
                    </div>
                    <h2 style="color: var(--text-dark); margin-bottom: 10px;">¿Eliminar Usuario?</h2>
                    <p style="color: var(--text-gray); font-size: 0.95rem;">El usuario perderá acceso al sistema
                        permanentemente.</p>
                </div>
                <div style="display: flex; gap: 15px; margin-top: 10px;">
                    <button id="btn-cancel-delete-user" class="btn-complete"
                        style="background: transparent; border: 1px solid var(--border-color); color: var(--text-gray);">Cancelar</button>
                    <button id="btn-confirm-delete-user" class="btn-complete"
                        style="background: #C62828; color: white;">Sí, Eliminar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="product-modal-overlay" id="logout-modal">
        <div class="product-modal-box tracking-box" style="max-width: 400px; text-align: center;">
            <div class="tracking-content">
                <div style="margin: 20px 0;">
                    <div class="icon-circle"
                        style="background: #E8EAF6; color: var(--primary-color); margin: 0 auto 15px auto; width: 80px; height: 80px; font-size: 2.5rem; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                        <i class='bx bx-log-out'></i>
                    </div>

                    <h2 style="color: var(--text-dark); margin-bottom: 10px;">¿Cerrar Sesión?</h2>

                    <p style="color: var(--text-gray); font-size: 0.95rem;">
                        ¿Estás seguro de que deseas salir del panel de administración?
                    </p>
                </div>

                <div style="display: flex; gap: 15px; margin-top: 10px; justify-content: center;">
                    <button id="btn-cancel-logout" class="btn-complete"
                        style="background: transparent; border: 1px solid var(--border-color); color: var(--text-gray);">
                        Cancelar
                    </button>

                    <button id="btn-confirm-logout" class="btn-complete"
                        style="background: var(--primary-color); color: white;">
                        Cerrar Sesión
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="reset-colors-modal" class="custom-alert-overlay">
        <div class="custom-alert-box">
            <div style="padding: 20px 0;">
                <div class="icon-circle"
                    style="background: #E3F2FD; color: var(--primary-color); margin: 0 auto 15px auto; width: 80px; height: 80px; font-size: 2.5rem; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                    <i class='bx bx-palette'></i>
                </div>

                <h2 style="color: var(--text-dark); margin-bottom: 10px;">¿Restaurar Colores?</h2>

                <p style="color: var(--text-gray); font-size: 0.95rem;">
                    Esta acción volverá el diseño de la tienda a sus colores originales (Azul y Blanco). ¿Deseas
                    continuar?
                </p>
            </div>

            <div style="display: flex; gap: 15px; margin-top: 10px; justify-content: center;">
                <button id="btn-cancel-reset" class="btn-complete"
                    style="background: transparent; border: 1px solid var(--border-color); color: var(--text-gray);">
                    Cancelar
                </button>

                <button id="btn-confirm-reset" class="btn-complete">
                    Sí, Restaurar
                </button>
            </div>
        </div>
    </div>

    <div id="save-success-modal" class="custom-alert-overlay">
        <div class="custom-alert-box">
            <div style="padding: 20px 0;">
                <div class="icon-circle"
                    style="background: #E8F5E9; color: var(--primary-color); margin: 0 auto 15px auto; width: 80px; height: 80px; font-size: 2.5rem; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                    <i class='bx bx-check-circle'></i>
                </div>

                <h2 style="color: var(--text-dark); margin-bottom: 10px;">¡Tema Guardado!</h2>

                <p style="color: var(--text-gray); font-size: 0.95rem;">
                    La nueva paleta de colores se ha aplicado correctamente a la tienda y al panel.
                </p>
            </div>

            <div style="display: flex; justify-content: center; margin-top: 10px;">
                <button id="btn-close-save-modal" class="btn-complete">
                    ¡Excelente!
                </button>
            </div>
        </div>
    </div>


    <div class="product-modal-overlay" id="delete-hero-modal">
        <div class="product-modal-box tracking-box" style="max-width: 400px; text-align: center;">
            <div class="tracking-content">
                <div style="margin: 20px 0;">
                    <div class="icon-circle"
                        style="background: #FFEBEE; color: #C62828; margin: 0 auto 15px auto; width: 80px; height: 80px; font-size: 2.5rem; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                        <i class='bx bx-trash'></i>
                    </div>

                    <h2 style="color: var(--text-dark); margin-bottom: 10px;">¿Quitar Imagen?</h2>

                    <p style="color: var(--text-gray); font-size: 0.95rem;">
                        La imagen se quitará de la vista previa. Recuerda guardar los cambios para aplicarlo.
                    </p>
                </div>

                <div style="display: flex; gap: 15px; margin-top: 10px; justify-content: center;">
                    <button id="btn-cancel-delete-hero" class="btn-complete"
                        style="background: transparent; border: 1px solid var(--border-color); color: var(--text-gray);">
                        Cancelar
                    </button>

                    <button id="btn-confirm-delete-hero" class="btn-complete"
                        style="background: #C62828; color: white;">
                        Sí, Quitar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/dashboard.js"></script>
</body>

</html>